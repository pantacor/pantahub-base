#!/bin/sh

# PANTAHUB_SCRYPT_SECRET=`openssl rand -base64 16`
PANTAHUB_SCRYPT_SECRET="ADD YOUR SECRET HERE"

# PANTAHUB_JWT_SECRET=`openssl genrsa -out - 2048 | base64 -w0`
PANTAHUB_JWT_SECRET="REMOVE==FOR==TESTING==DELETE==FOR==PROD:::LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUlFb2dJQkFBS0NBUUVBdWlnUU9PVFcva3o1THdzNzVuZ2k3QVhyWTZGaUFzQ3FCYTdPdEZSUkxvYzRuaGptCnhYR2Q0am5tdTYwMVlCTzdqTnd3MVVCOCt0OTJQdjduMXhvSFF1Z3RDeXMyL1IrSU4wWENvKzl4YUljRmVCeXcKcGcrOFVzOHFMcjBsRFFSaVErSi9KZnM1cTVrS1ovZ1kvdmY5ak1XeFcrVXN2cjVnNXRMWEZRK0NiZXBzbmVzeQpPRzlvR0NCckMyUHVlTytyWVlIOVhDb0J3cnVOWGk3Um9obUh3ZDZWa21ObURkTWRMMGhFd3Y0bGNTY0RRVWxICmZ6ZnRhdFp5Z2xRbmE1QjJYL00rQmh0MitWZ3dpSytOeTVJNkhaNTB6ZlRnSWYzL0FJaHVUelRSS2RlcVdwQnkKdld4RXJtU2xEN3kwT1JQTWpydVpqeXpTNG9IMEZQTFpYRDBqK1FJREFRQUJBb0lCQUVaQTZtWmVUcGpvT2I0OApVaDNYUnU2bUNVQ3ZYZ3JGNVNTQjVUWisvNmc4bGV4c1gyTXlUckJhdzY0ZVh4OWtNd3FrNnJVQVFtcDNQT3ZuClRWMkxVQ1E2OVF6YkFVU2p5c2Q1UjB5UkI4NjM3aU4zU0Y5VFh2SXRockRlNXdXem10WWR1M2g5Q0RXdmF4THoKdVpNM3lmTi9oRUMzQzV6c3dpczZkTHRaQUJNMG1UZ09pOFh6SlNwSElXUmtNTDNMN1BiNkY0eERQcDV2Q0FWMApRQVZqZXI2NVVUV1hiV3Vmb0d0L1JtWThFbzJzS2lqMU1IbnUvelJ4YjYvNFF0bkVtUlBmSnkvem5vVFFwVUlRCjVCd0JIdE5jWEtDOTByWXdNVGJsRXMxWFJ0TlF5WHBZSzY2V3N3b3VWclpRY1dybmp0b2R5ZnVsUWUvd3JqeFQKZ2JDaitwVUNnWUVBNSt5NnNNTEIxRHVsdmNTMEJidmh6MWYwZ1BXSVZGVGpxLzladzg2UlN1RDFWRytHc1pnRQpzNlBRN3UzNWJ2VGMxRUYzd21BVjBsQWFvTjlGVmE0SnBub2c0bzJmb3FlOE9XYXJNWjhJbElXMkVrdEo1L1ZlCnR3aXVZeGd6NkZzUU51UnF4NXJLTC9UQWlaKzN1QTd6RjJWb3BOWnlwSWFmWWJGRHhkdzY2eE1DZ1lFQXpYc1IKcEdNNzlWNk5LcFd5ZVlXa0NieG8xRWlnb2g2SDJ3Zm4wekczaWRVdTcxdURzS3ZkNENQWm1ycjdYbFVpOTVUSwpTblFWNlZoRmVDeEpNcjdPTU9pVk9mUlp4VzRpTmc2THpqSlhpcWdDNGQ5dll4TVpSMkNWL2Z1Sjh1b0JTc0JmCjRUTGIzSTNTd2hoajRhOHNoU2l5UmVnaFdXcEd1TXpaSEF4TnFrTUNnWUI2YnVFN1VRVUw2aFViOGd4cS9uMDkKZlJ3cE8vVWxOODhjekdkeDA4bWxzczR3TGRQNFN0MG9qREZQQUxmdDJEdi9uVFFBbThMSlROcFIxS3dBaUNpMgpCc0QzZUhZdVlzZ2RzVkpzbHB6cjh3NWo1L1R6Qy9oZFBhcjV5eHdUN0liSnc1bVBGK3JtbUJsUVRjMnB6OUtLCnBsRXd1N2kzbkEzbGY3UGNidDkzbXdLQmdDVkVRc2picm80cjNkSnhYL01tUjcvMFNkYm1iU3U1K2MzQnUwdlUKWW9NL0JNb29nTlBUOStPazNOeHhPUkc4d3lDLy9ZaFBVWUlHbm1MVE5WdGN1NnluSWhsbXRibFc1aUdEdGR0cAp5Zks5MGZnQlBBUnQvRkd6dE1CaGxIMVg3M0FOUDlacUVQSUpUc1loQWt4MkpzN251SjF4SWt0RE9SeGZHcWs1Cm1nUmRBb0dBVTIvTGtmVXA1cTlxaXozdWtDOGxpUW54aC9LTHpYSVJhT3FXdmtmd2N5NU9TT2RXVnpkWDV0d3YKdGQycnVsazFnVXk5OVlVWmowb3pzRll3cXlaZHppOUFsR3MxVkJjWkFWS08wbXk2cTRpSU9wMVJIczRWWjV0TApYSFRkSVFRMlJpeXVicmlGeHFYRzVRVzdJTWwvVm1DK2I0SlVCRm9UZ0dEZ21aa2d5S0k9Ci0tLS0tRU5EIFJTQSBQUklWQVRFIEtFWS0tLS0tCg=="

# PANTAHUB_JWT_PUB=`echo $PANTAHUB_JWT_SECRET  | base64 -d | openssl rsa -in - -outform PEM -pubout -out - | base64 -w0`
PANTAHUB_JWT_PUB="REMOVE==FOR==TESTING==DELETE==FOR==PROD:::LS0tLS1CRUdJTiBQVUJMSUMgS0VZLS0tLS0KTUlJQklqQU5CZ2txaGtpRzl3MEJBUUVGQUFPQ0FROEFNSUlCQ2dLQ0FRRUF1aWdRT09UVy9rejVMd3M3NW5naQo3QVhyWTZGaUFzQ3FCYTdPdEZSUkxvYzRuaGpteFhHZDRqbm11NjAxWUJPN2pOd3cxVUI4K3Q5MlB2N24xeG9IClF1Z3RDeXMyL1IrSU4wWENvKzl4YUljRmVCeXdwZys4VXM4cUxyMGxEUVJpUStKL0pmczVxNWtLWi9nWS92ZjkKak1XeFcrVXN2cjVnNXRMWEZRK0NiZXBzbmVzeU9HOW9HQ0JyQzJQdWVPK3JZWUg5WENvQndydU5YaTdSb2htSAp3ZDZWa21ObURkTWRMMGhFd3Y0bGNTY0RRVWxIZnpmdGF0WnlnbFFuYTVCMlgvTStCaHQyK1Znd2lLK055NUk2CkhaNTB6ZlRnSWYzL0FJaHVUelRSS2RlcVdwQnl2V3hFcm1TbEQ3eTBPUlBNanJ1Wmp5elM0b0gwRlBMWlhEMGoKK1FJREFRQUIKLS0tLS1FTkQgUFVCTElDIEtFWS0tLS0tCg=="

# PANTAHUB_JWE_SECRET=`openssl genrsa -out - 2048 | base64 -w0`
PANTAHUB_JWE_SECRET="REMOVE==FOR==TESTING==DELETE==FOR==PROD:::LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUlFcEFJQkFBS0NBUUVBMUY4Rk1KTElOTVdmUEJoSmVBVnd1cGlhZFk4SW5NQkdaY2trR3JqZG1jcU4vckFJCkV0bHFCbE5YT2RaanV6MklQVm9RMFB2L25VMEt5anJkR1JENHN2RkhFZEFqMkZnWWc4Y3B6ZHp0Z2c2aEpJNnIKSUJkMlAxR3hrQnF4ZlNlSDVrRE1JTzBrSWw4ZDBvRzZrVERNWmQyZlZxeFZFdTNmNG5RY08wU2ViUnJIODlVdwp6Rjg4NVAzaHZXbTRtM1g0ZGIvbjZyejFNckZrWlRVRnlJNXRTRms5V3c3V2RKam15WmZ3SGt0V085TG9OTjNUCkhBM2tLSWFtS1M2bEZMNTdOMldWKzNUY0Jnc0FERFFLdnpaZEtvUDd1dmd6MUVvTGwxTTY5TFZEc0dWSnh4QjQKTm1wbjVZRUJqZ296UlFZWWtTcWFGWXVIUEJmQkN0YytSN2VGNlFJREFRQUJBb0lCQUJUcEtrU25IMGw2Ny92bAoxRTRhRXdoOGdERDFIWDc1dTdUSUFtTVRNdGF5eUJwODBMNnlZNnN0eDVmdFVUS2RrMjJmRWFyU05WQVN4dTQwCnI1S0pSa093V0RRYnozdTg2T1VJMWtmcjZnTDFWODZXc2FqZVJvbGpqTjFJazVOa01oQnM3dXlMRFJUSlV0Rm8KYnF0Zko3RWNDbFZwY0pNRmt4YmtJZWVBRVMxaTJLUkl1bkdvNU80Tkkxa0s1MTNJTlp6bzFRK3BrZ3BzWXhZZwpHZFhxcS9lWFN2TzRNSjVJQkQ5QnZkQ0lnem1KL1ZzM29ZenNQeTRXMUVJempyWEZjcWV6akJBbEFzUVFCMElICkxacXkva3hBdWdsUkJybmxUVXQ3T2g4cGdqeGxWSWFmZlRnSnByVTJlZnFPR29TcGtJSmR6RDdkSy83emdzdGYKV2tXUGpRRUNnWUVBK3hEYktHRXM0RGM2TjNVUFFuL0ZGQ3hidTc0Q3puTFhPeFRubTNEQ21tU3d6OFhGalZReQpKblZXbEgyRHZETnVWVlErc1pydFZ5aklLa2FyUmk0Yk5JcXJocnFmUW5vaURzZmlnc1ZyVE8wSE90WnQ5ZExEClBySTlEcmNxRS9LTTZxR1VHd0hPZWV3dG9sL1lpenJNYU9ldlpsOEFmZzh1S1NyV1J0aG4wTWtDZ1lFQTJJdDgKaGV5REprQnRVditMMWd2VzEzZlVOTGxnaTVnMEU0MnFyMEJvMlJ0M0luSGt5TTl5UmxRWTJidVZxamQ1Y2ZFZwpISzZqYkVHM3BZbms5MDVBMzdpbzdreHFYeEZmZDlTTDhUQjUrWjRnUkkrRmhRVmZveGI0L1lnWjNuVmg5SmM1CktyajFVY3J4UWJRSzBLdzlod3FMaitJZ0lIVXNmVXk4eVEveXZDRUNnWUIzNTBYelUrMTlxNEtISjhYQTZZcHkKcHZpc2dnT1BHek9GU09lUHlkdDJwdTMyWEtxTFk1R0w0bkFWL0pla2t4OTNhd09DQ002ZTJLQTM2SVkxdnlGSgpCNDBCakRFeEsya0dqQm0yZ0poTkpjcFZKRUZockdXSWxORXFMUG5RaXY4WHMxRXJVTUtPWWVndGF2N2RCNWpGCjVSaFVtTHlBZDdtQSthOWFLRkgwV1FLQmdRQ0hxTE1GTDR0bURseXU3M3RLU0RaNjNBNHNUYXBIS2I0T05lVWwKVDRPZjU4MzEzVVpINjNZYXl4cWFaU000OVBIM1NPa21MdDRndHZiM0ZQRkZZVmZSRUYxOGxKRGJLQVlZQ3liMApuYnI4ZjJ5VnB4Z3RvcFVzbGZxODBtUHFjcjFBUHZESWJBRDhFZGljb2M5WXRWOENWNy9oRHZlemZkUzJWcm02CmVHeElJUUtCZ1FDdTNWcllVdmdvQkNsa24wR3pqYVBIZ0dRZkZQZjhMZEdTUXkyU255VStQSmEzU2J1UjNaSncKUVRjQ1lGRjlPc25ENjhPV0NrV2prR01xRXpjMTBuRDBOb2tYVmFBalZIbFEwVCtWYnA3YUFlWDhoVXpueXF2LwptZStYVHN3RDltZ1paUThYZWRsMFAxSXZlYkdRMUV3YVVqem9TRkpFbGFpNE1iTkd3cUduTHc9PQotLS0tLUVORCBSU0EgUFJJVkFURSBLRVktLS0tLQo="

# PANTAHUB_JWE_PUB=`echo $PANTAHUB_JWT_SECRET  | base64 -d | openssl rsa -in - -outform PEM -pubout -out - | base64 -w0`
PANTAHUB_JWE_PUB="REMOVE==FOR==TESTING==DELETE==FOR==PROD:::LS0tLS1CRUdJTiBQVUJMSUMgS0VZLS0tLS0KTUlJQklqQU5CZ2txaGtpRzl3MEJBUUVGQUFPQ0FROEFNSUlCQ2dLQ0FRRUExRjhGTUpMSU5NV2ZQQmhKZUFWdwp1cGlhZFk4SW5NQkdaY2trR3JqZG1jcU4vckFJRXRscUJsTlhPZFpqdXoySVBWb1EwUHYvblUwS3lqcmRHUkQ0CnN2RkhFZEFqMkZnWWc4Y3B6ZHp0Z2c2aEpJNnJJQmQyUDFHeGtCcXhmU2VINWtETUlPMGtJbDhkMG9HNmtURE0KWmQyZlZxeFZFdTNmNG5RY08wU2ViUnJIODlVd3pGODg1UDNodldtNG0zWDRkYi9uNnJ6MU1yRmtaVFVGeUk1dApTRms5V3c3V2RKam15WmZ3SGt0V085TG9OTjNUSEEza0tJYW1LUzZsRkw1N04yV1YrM1RjQmdzQUREUUt2elpkCktvUDd1dmd6MUVvTGwxTTY5TFZEc0dWSnh4QjRObXBuNVlFQmpnb3pSUVlZa1NxYUZZdUhQQmZCQ3RjK1I3ZUYKNlFJREFRQUIKLS0tLS1FTkQgUFVCTElDIEtFWS0tLS0tCg=="

# Ca configuration
PANTAHUB_CA_CERT=LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUROekNDQWgrZ0F3SUJBZ0lFRFphQk5qQU5CZ2txaGtpRzl3MEJBUXNGQURBck1STXdFUVlEVlFRRERBcFEKWVc1MFlXTnZja05CTVJRd0VnWURWUVFLREF0UVlXNTBZV052Y2t4MFpEQWVGdzB5TVRBeE1UUXhOalE0TXpWYQpGdzB5TWpBeE1UUXhOalE0TXpWYU1Dc3hFekFSQmdOVkJBTU1DbEJoYm5SaFkyOXlRMEV4RkRBU0JnTlZCQW9NCkMxQmhiblJoWTI5eVRIUmtNSUlCSWpBTkJna3Foa2lHOXcwQkFRRUZBQU9DQVE4QU1JSUJDZ0tDQVFFQXJPelcKOUpHK0JRQ3B1SjhYek9xeVpVS3pIamNIMnVwd2tYYlNiT1F5eHI4TWtwUnl4eGFsMmFGcXVFbkE5T3NUMHpXMAovTnFiYjFvQ2hEQnNLMzF0ejRnd3JvNVJXWWlIdFR5Q2JEU0o3L1NzbjE1YU0wRFpuVTdQdDhIOE9iZHJJZ2doCmVKdUxKZm5sRFdiTWpCbkdNaXBsOVJWdVJWa0hkNzRtR1BzWVJmOFdNZmwrQlNPaXpLZzFnVTFXa0hZYlJEeWkKV3ZpZ3FXeTFMM0V0R2M4ZXNyazBSSnVBWWJsUzNXYnhmRmp2dXE5Qm9NdUZHT3VtdXREY1JkVzNNUjZlajhxUwpqZUs2b2ZDU0p3UkRvRis0OXpJS2xIQ1V4SWF6dFFMcWtZSGVjYTJ1eE5sY2o5UXdPbnZ6Z0Vwblg0c21QTURNCjV2MzVFem9HamhLNWhEaExFd0lEQVFBQm8yTXdZVEFQQmdOVkhSTUJBZjhFQlRBREFRSC9NQjhHQTFVZEl3UVkKTUJhQUZQSTlqc010VmNlb1lvWGhSY1J1bWxIdjBlMkRNQjBHQTFVZERnUVdCQlR5UFk3RExWWEhxR0tGNFVYRQpicHBSNzlIdGd6QU9CZ05WSFE4QkFmOEVCQU1DQVlZd0RRWUpLb1pJaHZjTkFRRUxCUUFEZ2dFQkFCZ3pNRXMxClZ4RGtjaklhRHJZcy9naWl4eVMyM1U4dEh2L3NER0JnNm1wK1dGSTdwT1RuZmEzS0tUTG1GM3hkL0dBSFA1djMKSUdGNWtyMkRyNThiRjRWNTkwK0lBU0VBNDM2VGhmczVZSG5ubWRtZExja1doV3NhRTliZ3BrVjNWWmRER3Y1YgpVbnJCejhQcE9RYS9CdktJMXNJb1VDMnBkVVYzMjF6eEJZMTRWeXN2YzJtd3BhdU1mU0I0Q2IyVlN6RitUOEZtCkNWOEFQektUZ3RLNmJ2TXJva29IdmRYU3BhdFJqYmw3Y3p2VVpuNFdIZWVvdW5mMzhYbWF1VEgzSFpaWDh6VWUKTkhQRklMWTB2Nmg2bGFhNEY2UElBTnBjaW92c08xeUtyS2ozSCsvdWhCTS9ic0NOb0RiWnBCbkNnUklKb2tDcgo2UjJHNVlLT2dZcm1ZbDQ9Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K
PANTAHUB_CA_HOST=IP
PANTAHUB_CA_RA_USER=USER
PANTAHUB_CA_RA_PASS=PASS
PANTAHUB_CA_PC12_CERT=PC12_CERT_BASE64
PANTAHUB_CA_PC12_KEY=PC12_KEY_BASE64
PANTAHUB_CA_SERVICE_URL=https://192.168.1.12:8443/ejbca/ejbcaws/ejbcaws?wsdl
PANTAHUB_PROXY_TLS_AUTH_TOKEN=abcde1234

# JWT EXPIRATION TIME IN MINUTES FOR PASSWORD RECOVERY
# Default: 60
# PANTAHUB_RECOVER_JWT_TIMEOUT_MINUTES="60"

## Set captcha usage
PANTAHUB_USE_CAPTCHA=false

## Google Captcha service configuration. When not empty please set PANTAHUB_USE_CAPTCHA=true
GOOGLE_CAPTCHA_SECRET=""

## OAUTH THIRDPARTY CONFIGURATION
GOOGLE_OAUTH_CLIENT_ID="Change it"
GOOGLE_OAUTH_CLIENT_SECRET="Change it"
GITHUB_OAUTH_CLIENT_ID="Change it"
GITHUB_OAUTH_CLIENT_SECRET="Change it"
GITLAB_OAUTH_CLIENT_ID="Change it"
GITLAB_OAUTH_CLIENT_SECRET="Change it"

# easiest for small deployments is to just set your admin
# password here and use the admin demo account.
PANTAHUB_DEMOACCOUNTS_PASSWORD_admin=

# you have to set these before you can use these accounts
PANTAHUB_DEMOACCOUNTS_PASSWORD_user1=
PANTAHUB_DEMOACCOUNTS_PASSWORD_user2=
PANTAHUB_DEMOACCOUNTS_PASSWORD_user3=
PANTAHUB_DEMOACCOUNTS_PASSWORD_device1=
PANTAHUB_DEMOACCOUNTS_PASSWORD_service1=


# adjust these to match your deployment
PANTAHUB_HOST=api.pantahub.com
PANTAHUB_PORT=
PANTAHUB_SCHEME=https
PANTAHUB_HOST_WWW=www.pantahub.com

# storage driver to use (local or s3)
PANTAHUB_STORAGE_DRIVER=local

# remote S3 storage path (relative path in bucket)
PANTAHUB_STORAGE_PATH=/

# local storage path
PANTAHUB_S3PATH=../local-s3

# if you want to use S3 compatible storage instead of local storage for objects, fill in these
PANTAHUB_S3_USE_ANONYMOUS_CREDENTIALS=false
PANTAHUB_S3_ACCESS_KEY_ID=foo
PANTAHUB_S3_SECRET_ACCESS_KEY=foo
PANTAHUB_S3_REGION=us-east-1
PANTAHUB_S3_BUCKET=testing
PANTAHUB_S3_ENDPOINT=http://localstack:5000

# adjust these if you want to send emails on registration,
# password lost etc.
MAILGUN_DOMAIN=
MAILGUN_APIKEY=
MAILGUN_PUBAPIKEY=

# define productname used in various places
# including the ELK index prefix
PANTAHUB_PRODUCTNAME=pantahub-community

# set default ELASTIC URL to k8s same namespace url
ELASTIC_URL=http://elasticsearch:9200

# set elastic tweaks: remember replicas 0 for single node
PANTAHUB_ELASTIC_SHARDS=5
PANTAHUB_ELASTIC_REPLICAS=1

# fluend defaults are empty (aka no direct fluent logging)
FLUENT_HOST=fluentd
FLUENT_PORT=24224

# to configure your default mongo connection, configure
# these or pass in the values env values
#
MONGO_HOST=mongo
MONGO_PORT=27017
MONGO_DB=testdb-pantabase-serv
MONGO_USER=user
MONGO_PASS=pass

# adjust these if you want to send emails on registration,
# password lost etc.
SMTP_HOST=
SMTP_PORT=
SMTP_USER=
SMTP_PASS=

# adjust this if you want special url for swapping username/password for
# access token
PH_AUTH=https://api.pantahub.com/auth

######### some default shuffling. dont touch at best ######

# Pantahub garbage collector API End Point
PANTAHUB_GC_API="http://localhost:2000"

# Pantahub GC garbage removal flag
PANTAHUB_GC_REMOVE_GARBAGE="false"
# Pantahub GC uncalimed expiry for device to mark it as garbage
PANTAHUB_GC_UNCLAIMED_EXPIRY="P5D"
# Pantahub GC garbage expiry to remove it
PANTAHUB_GC_GARBAGE_EXPIRY="P2D"
